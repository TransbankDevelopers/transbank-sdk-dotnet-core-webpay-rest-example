@{
    ViewBag.Title = "Webpay Plus Mall";
}

<h2>@ViewBag.Title</h2>
<h4>MallTransaction.Refund</h4>

<h4>Request:</h4>
<pre style="background-color: lightyellow;">
POST: https://webpay3gint.transbank.cl/rswebpaytransaction/api/webpay/v1.0/transactions/@ViewBag.SaveToken/refunds
<code class="json">
    {
        "amount": @ViewBag.SaveAmount.ToString(),
        "commerce_code": "@ViewBag.SaveCommerceCode",
        "buy_order": "@ViewBag.SaveBuyOrder"
    }
</code>
</pre>

<h4>Response:</h4>
<pre>
<code>
    @ViewBag.Result.ToString()
</code>
</pre>

@if (ViewBag.Result.ResponseCode == 0)
{
    <p>Reembolso realizado exitosamente.</p>
}
else
{
    <p>Error al ejecutar reembolso.</p>
}

<a href="javascript: document.globalForm.submit();" class="btn btn-info">Solicitar estado transacción</a>
@Html.ActionLink("Volver al inicio", "Index", "Home", null, new { @class = "btn btn-primary" })
